<app-navbar></app-navbar>
<div class="container mt-5">
  <h2 class="text-center mb-4">Editar Libro</h2>
  <form #form="ngForm" (ngSubmit)="updateLibro()" class="needs-validation" novalidate>
    <!-- Campo Título -->
    <div class="mb-3">
      <label for="titulo" class="form-label">Título</label>
      <input
        type="text"
        id="titulo"
        [(ngModel)]="libro.titulo"
        name="titulo"
        class="form-control"
        required
        placeholder="Ingrese el título del libro"
      />
    </div>

    <!-- Campo Autor -->
    <div class="mb-3">
      <label for="autor" class="form-label">Autor</label>
      <input
        type="text"
        id="autor"
        [(ngModel)]="libro.autor"
        name="autor"
        class="form-control"
        required
        placeholder="Ingrese el autor del libro"
      />
    </div>

    <!-- Campo ISBN -->
    <div class="form-group">
      <label for="isbn">ISBN</label>
      <input
        type="text"
        id="isbn"
        [(ngModel)]="libro.isbn"
        name="isbn"
        required
        pattern="^[0-9]+$"
        #isbn="ngModel"
        class="form-control"
        placeholder="Ingrese el ISBN del libro"
      />
      <div *ngIf="isbn.invalid && isbn.touched" class="error-message">
        El ISBN debe contener solo números.
      </div>
    </div>

    <!-- Campo Categoría -->
    <div class="mb-3">
      <label for="categoria" class="form-label">Categoría</label>
      <input
        type="text"
        id="categoria"
        [(ngModel)]="libro.categoria"
        name="categoria"
        class="form-control"
        required
        placeholder="Ingrese la categoría del libro"
      />
    </div>

    <!-- Campo Cantidad Disponible -->
    <div class="form-group">
      <label for="cantidadDisponible">Cantidad Disponible</label>
      <input
        type="text"
        id="cantidadDisponible"
        [(ngModel)]="libro.cantidadDisponible"
        name="cantidadDisponible"
        class="form-control"
        required
        pattern="^[1-9][0-9]*$"
        #cantidadDisponible="ngModel"
        placeholder="Ingrese la cantidad disponible"
      />
      <div *ngIf="cantidadDisponible.invalid && cantidadDisponible.touched" class="error-message">
        La cantidad disponible debe ser un número mayor que 0.
      </div>
    </div>

    <!-- Campo Fecha de Publicación -->
    <div class="mb-3">
      <label for="fecha_publicacion" class="form-label">Fecha de Publicación</label>
      <input
        type="date"
        id="fecha_publicacion"
        [(ngModel)]="libro.fecha_publicacion"
        name="fecha_publicacion"
        class="form-control"
        required
      />
    </div>

    <!-- Botones de acciones -->
    <div class="d-flex justify-content-center gap-2">
      <!-- Botón de Actualizar -->
      <button type="submit" class="btn btn-success" [disabled]="form.invalid">
        Actualizar
      </button>
      <!-- Botón de Cancelar -->
      <button type="button" class="btn btn-secondary" (click)="cancelEdit()">
        Cancelar
      </button>
    </div>
  </form>
</div>
